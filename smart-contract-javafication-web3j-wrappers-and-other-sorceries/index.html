<!DOCTYPE html><html lang="en" class="no-js"><head><title>Smart Contract Javafication: Web3j Wrappers and Other Sorceries – Loris Occhipinti</title><meta name="description" content="Random access stories about software engineering."><meta name="robots" content="index,follow"><meta name="generator" content="Eleventy"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="twitter:site" content="@ghost"><meta name="twitter:creator" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://blog.lorisocchipinti.com/smart-contract-javafication-web3j-wrappers-and-other-sorceries/"><meta name="twitter:title" content="Smart Contract Javafication: Web3j Wrappers and Other Sorceries – Loris Occhipinti"><meta name="twitter:description" content="Recently I was dabbling with Quorum, an open-source suite of tools, APIs, private key managers and clients to operate a private Ethereum network. My main goal was to figure out how to build applications on top of the Ethereum blockchain and how to correctly interact with Smart Contracts. I chose a Quorum version using Besu, an Ethereum client maintained by the Hyperledger Foundation that implements private transactions for enterprise use cases.

As a first step, we would need to prepare the tool"><meta name="twitter:image" content="https://blog.lorisocchipinti.com/content/images/2022/10/1-Wjh1ue0ghkzlKQpyI2CgoQ_1.jpeg"><link rel="author" href=""><link rel="publisher" href="https://blog.lorisocchipinti.com"><meta itemprop="name" content="Smart Contract Javafication: Web3j Wrappers and Other Sorceries – Loris Occhipinti"><meta itemprop="description" content="Recently I was dabbling with Quorum, an open-source suite of tools, APIs, private key managers and clients to operate a private Ethereum network. My main goal was to figure out how to build applications on top of the Ethereum blockchain and how to correctly interact with Smart Contracts. I chose a Quorum version using Besu, an Ethereum client maintained by the Hyperledger Foundation that implements private transactions for enterprise use cases.

As a first step, we would need to prepare the tool"><meta itemprop="image" content="https://blog.lorisocchipinti.com/content/images/2022/10/1-Wjh1ue0ghkzlKQpyI2CgoQ_1.jpeg"><meta property="og:url" content="https://blog.lorisocchipinti.com/smart-contract-javafication-web3j-wrappers-and-other-sorceries/"><meta property="og:type" content="website"><meta property="og:title" content="Smart Contract Javafication: Web3j Wrappers and Other Sorceries – Loris Occhipinti"><meta property="og:image" content="https://blog.lorisocchipinti.com/content/images/2022/10/1-Wjh1ue0ghkzlKQpyI2CgoQ_1.jpeg"><meta property="og:description" content="Recently I was dabbling with Quorum, an open-source suite of tools, APIs, private key managers and clients to operate a private Ethereum network. My main goal was to figure out how to build applications on top of the Ethereum blockchain and how to correctly interact with Smart Contracts. I chose a Quorum version using Besu, an Ethereum client maintained by the Hyperledger Foundation that implements private transactions for enterprise use cases.

As a first step, we would need to prepare the tool"><meta property="og:site_name" content="Loris Occhipinti"><meta property="og:locale" content="en"><meta property="article:author" content="https://blog.lorisocchipinti.com"><style>:root{--color-primary:#3eb0ef;--color-base:#15171a;--color-secondary:#5b7a81;--color-border:#c7d5d8;--color-bg:#f5f5f5;--font-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--font-serif:Georgia,Times,serif;--font-mono:Menlo,Courier,monospace;--font-light:100;--font-normal:400;--font-bold:700;--font-heavy:800;--height:4rem;--margin:2rem;--radius:0.6rem}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-spacing:0;border-collapse:collapse}img{max-width:100%;height:auto}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:0}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;background:var(--color-base);-webkit-tap-highlight-color:transparent}body{overflow-x:hidden;color:#3c484e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::selection{text-shadow:none;background:#cbeafb}hr{position:relative;display:block;width:100%;margin:1.8em 0 2.4em;padding:0;height:1px;border:0;border-top:1px solid #e3e9ed}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{margin:0;padding:0;border:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em 0}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{float:left;margin:0 20px 0 0;width:120px;font-weight:500;text-align:right}dd{margin:0 0 5px 0;text-align:left}blockquote{margin:.3em 0 1.8em;padding:0 1.6em 0 1.6em;border-left:#cbeafb .5em solid}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#26a8ed;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-top:0;color:var(--color-base);line-height:1.15;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em 0;font-size:4rem;font-weight:700}@media (max-width:500px){h1{font-size:2rem}}h2{margin:1.5em 0 .5em 0;font-size:2rem}@media (max-width:500px){h2{font-size:1.8rem}}h3{margin:1.5em 0 .5em 0;font-size:1.8rem;font-weight:500}@media (max-width:500px){h3{font-size:1.7rem}}h4{margin:1.5em 0 .5em 0;font-size:1.6rem;font-weight:500}h5{margin:1.5em 0 .5em 0;font-size:1.4rem;font-weight:500}h6{margin:1.5em 0 .5em 0;font-size:1.4rem;font-weight:500}.viewport{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}.container{max-width:1120px;margin:0 auto;padding:0 4vw}.content{margin:0 auto;font-size:2rem;line-height:1.7em}.content-body{display:flex;flex-direction:column;font-family:var(--font-serif)}.post-full-content{max-width:720px;margin:0 auto;background:#fff}.post-full-content figcaption{margin:1em 3em 0;font-size:55%;line-height:1.6em;text-align:center;font-weight:400}.post-feature-image img{margin:0 0 3vw;width:100%;height:500px;object-fit:cover}.content-body h1,.content-body h2,.content-body h3,.content-body h4,.content-body h5,.content-body h6{font-family:var(--font-sans-serif)}.content-body h1{margin:1em 0 .5em 0;font-size:3.4rem;font-weight:700}@media (max-width:500px){.content-body h1{font-size:2.8rem}}.content-title{margin:0 0 .8em;font-size:5rem}@media (max-width:500px){.content-title{margin:.8em 0;font-size:3.4rem}.content{font-size:1.8rem}}.content-body h2{margin:.8em 0 .4em 0;font-size:3.2rem;font-weight:700}@media (max-width:500px){.content-body h2{font-size:2.6rem}}.content-body h3{margin:.5em 0 .2em 0;font-size:2.8rem;font-weight:700}@media (max-width:500px){.content-body h3{font-size:2.2rem}}.content-body h4{margin:.5em 0 .2em 0;font-size:2.4rem;font-weight:700}@media (max-width:500px){.content-body h4{font-size:2.2rem}}.content-body h5{display:block;margin:.5em 0;padding:1em 0 1.5em;border:0;font-family:Georgia,serif;color:var(--color-primary);font-style:italic;font-size:3.2rem;line-height:1.35em;text-align:center}.content-body h6{margin:.5em 0 .2em 0;font-size:2rem;font-weight:700}.content-body figure{margin:.4em 0 1.6em;font-size:2.8rem;font-weight:700}.content-body pre{margin:.4em 0 1.8em;font-size:1.6rem;line-height:1.4em;white-space:pre-wrap;padding:20px;background:var(--color-base);color:#fff;border-radius:12px}.site-head{padding-top:20px;padding-bottom:20px;color:#fff;background:var(--color-base);background-position:center;background-size:cover}.site-nav-item{display:inline-block;padding:5px 10px;color:#fff;opacity:.7}.site-nav-item:hover{text-decoration:none;opacity:1}.site-nav-right .site-nav-button{margin-left:.3rem}.site-nav-icon{height:15px;margin:-5px 0 0;vertical-align:baseline}.site-logo{height:25px}.site-mast{display:flex;align-items:center;justify-content:space-between}.site-mast-right{display:flex;align-items:center}.site-mast-right .site-nav-item:last-child{padding-right:0}.site-banner{max-width:80%;margin:0 auto;padding:10vw 0;text-align:center}.site-banner-title{margin:0;padding:0;color:#fff;font-size:4rem;line-height:1.3em}.site-banner-desc{margin:5px 0 0 0;padding:0;font-size:2.4rem;line-height:1.3em;opacity:.7}.site-nav{display:flex;align-items:center;justify-content:space-between;margin:15px 0 0 0}.site-nav-left{margin:0 20px 0 -10px}.site-nav-button{display:inline-block;padding:5px 10px;border:#fff 1px solid;color:#fff;font-size:1.3rem;line-height:1em;border-radius:var(--radius);opacity:.7}.site-nav-button:hover{text-decoration:none}.site-main{padding:4vw 0}.post-feed{display:grid;justify-content:space-between;grid-gap:30px;grid-template-columns:1fr 1fr 1fr}@media (max-width:980px){.post-feed{grid-template-columns:1fr 1fr}}@media (max-width:680px){.post-feed{grid-template-columns:1fr}}.post-card{color:inherit;text-decoration:none}.post-card:hover{text-decoration:none}.post-card-header{display:flex;flex-direction:column}.post-card-tags{margin:0 0 5px 0;font-size:1.4rem;line-height:1.15em;color:var(--color-secondary)}.post-card-title{margin:0 0 10px 0;padding:0}.post-card-excerpt{font-size:1.6rem;line-height:1.55em}.post-card-image{margin:0 0 10px 0;width:auto;height:200px;background:var(--color-secondary) no-repeat center center;background-size:cover;object-fit:cover}.post-card-footer{display:flex;align-items:center;justify-content:space-between;margin:10px 0 0 0;color:var(--color-secondary)}.post-card-footer-left{display:flex;align-items:center}.post-card-footer-right{display:flex;flex-direction:column}.post-card-avatar{width:30px;height:30px;margin:0 7px 0 0;border-radius:100%;display:flex;align-items:center;justify-content:center}.post-card-avatar .author-profile-image{display:block;width:100%;background:var(--color-secondary);border-radius:100%;object-fit:cover}.post-card-avatar .default-avatar{width:26px}.tag-header{max-width:690px;margin:0 0 4vw}.tag-header h1{margin:0 0 1rem 0}.tag-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}@media (max-width:500px){.tag-header{border-bottom:var(--color-bg) 1px solid;padding-bottom:4vw}.tag-header p{font-size:1.7rem}}.author-header{display:flex;justify-content:space-between;margin:0 0 4vw}.author-header h1{margin:0 0 1rem 0}.author-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}.author-header-image{flex:0 0 auto;margin:0 0 0 4vw;height:120px;width:120px;border-radius:100%;overflow:hidden}.author-header-meta{display:flex;margin:1rem 0 0 0}.author-header-item{display:block;padding:2px 10px}.author-header-item:first-child{padding-left:0}@media (max-width:500px){.author-header{border-bottom:var(--color-bg) 1px solid;padding-bottom:4vw}.author-header p{font-size:1.7rem}.author-header-image{height:80px;width:80px}}.pagination{position:relative;display:flex;justify-content:space-between;align-items:center;margin:4vw 0 0}.pagination a{display:inline-block;padding:10px 15px;border:var(--color-border) 1px solid;color:var(--color-secondary);text-decoration:none;font-size:1.4rem;line-height:1em;border-radius:var(--radius)}.pagination-location{position:absolute;left:50%;width:100px;margin-left:-50px;text-align:center;color:var(--color-secondary);font-size:1.3rem}.pagination span{color:var(--color-secondary);opacity:.8}.site-foot{padding:20px 0 40px 0;color:rgba(255,255,255,.7);font-size:1.3rem;background:var(--color-base)}.site-foot-nav{display:flex;align-items:center;justify-content:space-between}.site-foot-nav a{color:rgba(255,255,255,.7)}.site-foot-nav a:hover{text-decoration:none;color:#fff}.site-foot-nav-right a{display:inline-block;padding:2px 5px}.site-foot-nav-right a:last-child{padding-right:0}.kg-bookmark-card{width:100%;margin-top:0}.kg-bookmark-container{display:flex;min-height:148px;color:var(--color-base);font-family:var(--font-sans-serif);text-decoration:none;border-radius:3px;box-shadow:0 2px 5px -1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.09)}.kg-bookmark-container:hover{color:var(--color-base);text-decoration:none;box-shadow:0 2px 5px -1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.09)}.kg-bookmark-content{flex-grow:1;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:20px}.kg-bookmark-title{color:color(var(--color-secondary) l(-30%));font-size:1.6rem;line-height:1.5em;font-weight:600;transition:color .2s ease-in-out}.kg-bookmark-container:hover .kg-bookmark-title{color:var(--color-primary)}.kg-bookmark-description{display:-webkit-box;overflow-y:hidden;margin-top:12px;max-height:48px;color:color(var(--color-secondary) l(-10%));font-size:1.5rem;line-height:1.5em;font-weight:400;-webkit-line-clamp:2;-webkit-box-orient:vertical}.kg-bookmark-thumbnail{position:relative;min-width:33%;max-height:100%}.kg-bookmark-thumbnail img{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0 3px 3px 0;object-fit:cover}.kg-bookmark-metadata{display:flex;flex-wrap:wrap;align-items:center;margin-top:14px;color:color(var(--color-secondary) l(-10%));font-size:1.5rem;font-weight:400}.kg-bookmark-icon{margin-right:8px;width:22px;height:22px}.kg-bookmark-author{line-height:1.5em}.kg-bookmark-author:after{content:"•";margin:0 6px}.kg-bookmark-publisher{overflow:hidden;max-width:240px;line-height:1.5em;text-overflow:ellipsis;white-space:nowrap}.kg-gallery-container{display:flex;flex-direction:column;max-width:1040px;width:100%}.kg-gallery-row{display:flex;flex-direction:row;justify-content:center}.kg-gallery-image img{display:block;margin:0;width:100%;height:100%}.kg-gallery-row:not(:first-of-type){margin:.75em 0 0 0}.kg-gallery-image:not(:first-of-type){margin:0 0 0 .75em}.kg-gallery-card+.kg-gallery-card,.kg-gallery-card+.kg-image-card.kg-width-wide,.kg-image-card.kg-width-wide+.kg-gallery-card,.kg-image-card.kg-width-wide+.kg-image-card.kg-width-wide{margin:-2.25em 0 3em}</style><script>document.documentElement.classList.remove('no-js');</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-RW4ZLPSN8J"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RW4ZLPSN8J', { 'anonymize_ip': true });</script></head><body><svg xmlns="http://www.w3.org/2000/svg" style="height:0;position:absolute" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol id="facebook" viewBox="0 0 512 512"><path fill="#fff" d="M452 0H60C26.916 0 0 26.916 0 60v392c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V60c0-33.084-26.916-60-60-60zm20 452c0 11.028-8.972 20-20 20H338V309h61.79L410 247h-72v-43c0-16.975 13.025-30 30-30h41v-62h-41c-50.923 0-91.978 41.25-91.978 92.174V247H216v62h60.022v163H60c-11.028 0-20-8.972-20-20V60c0-11.028 8.972-20 20-20h392c11.028 0 20 8.972 20 20v392z"></path></symbol><symbol id="rss" viewBox="0 0 643 643"><path fill="#fff" d="M93.299 613.7c-50.798 0-92.117-41.348-92.117-92.117 0-50.827 41.319-92.174 92.117-92.174s92.117 41.376 92.117 92.174c.028 50.77-41.319 92.117-92.117 92.117zm0-155.507c-34.894 0-63.304 28.439-63.304 63.39 0 34.922 28.41 63.304 63.304 63.304 34.893 0 63.303-28.382 63.303-63.304.029-34.95-28.381-63.39-63.303-63.39z"></path><path fill="#fff" d="M400.537 614.306h-112.2c-7.952 0-14.407-6.454-14.407-14.407 0-69.585-26.883-134.905-75.664-183.945C149.514 366.998 84.654 340 15.704 340c-7.953 0-14.407-6.454-14.407-14.406V213.336c0-7.953 6.454-14.407 14.407-14.407 220.165 0 399.27 179.883 399.27 400.969-.03 7.982-6.455 14.408-14.437 14.408zm-98.139-28.814h83.473c-7.376-193.743-162.912-349.999-355.79-357.461v83.531c71.285 3.486 137.787 33.021 188.585 84.078 50.828 51.086 80.246 118.048 83.732 189.852z"></path><path fill="#fff" d="M598.775 614.363H486.604c-7.952 0-14.406-6.454-14.406-14.407 0-253.04-204.721-458.942-456.378-458.942-7.953 0-14.407-6.454-14.407-14.407v-112.2C1.412 6.455 7.866 0 15.819 0c329.397 0 597.363 269.147 597.363 599.956a14.375 14.375 0 0 1-14.407 14.407zm-97.966-28.813h83.387C576.675 282.085 332.307 36.593 30.226 28.987v83.444c256.124 7.549 463.12 215.64 470.583 473.119z"></path></symbol><symbol id="twitter" viewBox="0 0 612.002 612.002"><path fill="#fff" d="M197.553 557.219c-68.018 0-134.159-19.371-191.294-56.047-5.333-3.428-7.591-10.066-5.469-16.051 2.122-5.986 8.189-9.795 14.42-8.896 47.912 5.576 97.919-4.164 139.873-28.16-41.491-12.461-75.228-44.594-88.859-87.199a13.57 13.57 0 0 1 2.802-13.195 13.736 13.736 0 0 1 7.346-4.244c-32.404-24.678-52.864-63.639-52.864-106.436 0-4.816 2.558-10.012 6.72-12.461 4.163-2.449 9.305-3.21 13.495-.925a67.034 67.034 0 0 0 3.646 1.932c-14.719-21.739-22.881-47.749-22.881-74.902 0-23.562 6.23-46.796 18.093-67.147 2.231-3.863 6.23-6.366 10.692-6.72a13.734 13.734 0 0 1 11.59 4.952c55.04 67.501 134.703 110.298 220.624 119.086a135.305 135.305 0 0 1-.571-12.434c0-73.65 59.937-133.588 133.587-133.588 34.199 0 67.311 13.25 92.015 36.648 22.719-5.197 44.484-13.93 64.808-25.983a13.737 13.737 0 0 1 15.399 1.061c4.408 3.537 6.204 9.414 4.489 14.801a132.455 132.455 0 0 1-18.99 37.519 214.647 214.647 0 0 0 16.678-6.584c5.469-2.503 12.025-.979 15.916 3.7 3.891 4.625 4.245 11.291.898 16.324-15.808 23.562-35.07 44.103-57.299 61.162.082 2.938.109 5.904.109 8.842.001 174.453-132.798 354.945-354.973 354.945zm-128.69-53.543c40.458 17.33 84.125 26.336 128.69 26.336 205.17 0 327.766-166.645 327.766-327.765 0-4.979-.136-9.985-.326-14.964a13.59 13.59 0 0 1 5.632-11.59 228.226 228.226 0 0 0 27.507-23.371 255.254 255.254 0 0 1-26.99 4.707c-6.312.898-12.406-2.993-14.501-9.087-2.068-6.067.381-12.76 5.877-16.08a107.521 107.521 0 0 0 28.051-24.296c-13.577 5.197-27.562 9.25-41.845 12.025-4.571.953-9.333-.571-12.543-4.026-20.024-21.331-48.348-33.574-77.677-33.574-58.659 0-106.38 47.721-106.38 106.38 0 8.135.925 16.324 2.774 24.269a13.662 13.662 0 0 1-2.829 11.808c-2.721 3.265-6.829 5.523-11.101 4.843-92.858-4.68-180.33-45.953-243.179-114.189a106.518 106.518 0 0 0-6.094 35.533c0 35.696 17.685 68.753 47.286 88.533a13.578 13.578 0 0 1 5.414 15.454c-1.85 5.768-7.591 9.25-13.358 9.468a133.043 133.043 0 0 1-38.172-6.856c8.407 42.144 40.811 75.555 83.146 84.07 6.203 1.252 10.719 6.557 10.91 12.869.218 6.285-3.917 11.916-9.985 13.604-11.726 3.184-24.051 4.979-36.104 4.734 18.229 32.24 52.456 53.217 90.655 53.979 5.741.109 10.801 3.863 12.624 9.305s0 11.482-4.517 15.02c-38.226 29.953-83.01 47.964-130.731 52.861z"></path></symbol><symbol id="link" viewBox="0 0 16 16"><path d="M5.86 12.7l-.81.8c-.7.7-1.84.7-2.54 0a1.75 1.75 0 0 1 0-2.5l2.98-2.96c.61-.61 1.77-1.52 2.62-.68a1 1 0 1 0 1.4-1.4c-1.44-1.43-3.57-1.17-5.42.67L1.1 9.6a3.72 3.72 0 0 0 0 5.32 3.78 3.78 0 0 0 5.34 0l.8-.8a1 1 0 1 0-1.39-1.42zm9.03-11.5c-1.55-1.53-3.7-1.6-5.14-.19l-1 1a1 1 0 1 0 1.39 1.41l1-1c.75-.74 1.72-.43 2.35.2a1.75 1.75 0 0 1 0 2.5l-3.17 3.15c-1.46 1.45-2.14.77-2.43.48a1 1 0 0 0-1.4 1.4c.67.67 1.43 1 2.23 1 .98 0 2.01-.5 3-1.47l3.17-3.15a3.72 3.72 0 0 0 0-5.32z"></path></symbol><symbol id="nav" viewBox="0 0 16 11"><path d="M0 12h16v-2H0v2zm0-5h16V5H0v2zm0-7v2h16V0H0z"></path></symbol></svg><div class="viewport"><div class="viewport-top"><header class="site-head" style="background-image:url(https://static.ghost.org/v4.0.0/images/publication-cover.jpg)"><div class="container"><div class="site-mast"><div class="site-mast-right"><a href="https://twitter.com/ghost" class="site-nav-item" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--twitter" role="img" aria-labelledby="twitter-title"><title id="twitter-title">twitter</title><use xlink:href="#twitter" fill="currentColor"></use></svg> </a><a href="https://www.facebook.com/ghost" class="site-nav-item" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--facebook" role="img" aria-labelledby="facebook-title"><title id="facebook-title">facebook</title><use xlink:href="#facebook" fill="currentColor"></use></svg> </a><a class="site-nav-item" href="https://feedly.com/i/subscription/feed/https://blog.lorisocchipinti.com/feed.xml" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--rss" role="img" aria-labelledby="rss-title"><title id="rss-title">rss</title><use xlink:href="#rss" fill="currentColor"></use></svg></a></div></div><nav class="site-nav"><div class="site-nav-left"><a class="site-nav-item" href="/">Home </a><a class="site-nav-item" href="/fire-alert/">Fire Alert 🛰️🔥 </a><a class="site-nav-item" href="/about/">About</a></div><div class="site-nav-right"><a class="site-nav-button" href="/fire-alert/">Fire Alert 🛰️🔥 </a><a class="site-nav-button" href="/about/">About Me</a></div></nav></div></header><main class="site-main"><div class="container"><article class="content"><figure class="post-feature-image"><img src="data:image/png;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAATABkDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAcEBQYI/8QAKBAAAAUDAwMEAwAAAAAAAAAAAAECAwQFERIGBxMhQVEUMVKRMmGh/8QAGAEAAgMAAAAAAAAAAAAAAAAAAwQBAgX/xAAgEQACAgEDBQAAAAAAAAAAAAABAwACIQQRMgUiI1GB/9oADAMBAAIRAxEAPwBX6R049qpl6PDNKXUJyIldxY0na+pxaoy9UCjohocLPM/chotoaWqFAekkpTby+hH4FnqNmdVas0hazRGaMrEk/wAv2HtSuzBk4kIWO0jJJlHuFpmnxZinqaplJcdzZv8A0LLkT4SN5u3BcKUzKZzSeGB272Cu45PxV9BZQsqgoMgQmuWKPsCNp0jR0k1DxbLEvBCdSGkOVuy0kosDPqAA028JWh2rXb2JA3JZb9HGPBN7H2Ct4W/gn6AADRxgOony/J//2Q==" alt="Smart Contract Javafication: Web3j Wrappers and Other Sorceries" data-src="/assets/images/Z1e1QQg-1-Wjh1ue0ghkzlKQpyI2CgoQ_1.jpeg" class="lazyload" width="789" height="592"></figure><section class="post-full-content"><h1 class="content-title">Smart Contract Javafication: Web3j Wrappers and Other Sorceries</h1><section class="content-body load-external-scripts"><p>Recently I was dabbling with <a href="https://consensys.net/quorum/developers/" rel="noopener ugc nofollow">Quorum</a>, an open-source suite of tools, APIs, private key managers and clients to operate a private Ethereum network. My main goal was to figure out how to build applications on top of the Ethereum blockchain and how to correctly interact with Smart Contracts. I chose a Quorum version using Besu, an Ethereum client maintained by the Hyperledger Foundation that implements private transactions for enterprise use cases.</p><p>As a first step, we would need to prepare the tools of the trade. Of course, having a running blockchain is of the essence to even start working. The setup of a local Ethereum blockchain is very tricky IMHO, but we are in luck because <a href="https://consensys.net/" rel="noopener ugc nofollow">ConsenSys</a> curates a Quorum <a href="https://consensys.net/quorum/products/guides/getting-started-with-consensys-quorum" rel="noopener ugc nofollow">quickstart project </a>with everything needed to have a network running in minutes. The Consensys hands-on guide does a nice job of making the network deployment straightforward, so I won’t cover the details here.</p><p>However, if everything was done correctly, you will host a lively party of docker images on your machine:</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAMCAIAAAAYkIEcAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWklEQVQoz52T2W6DMBBF+ZDagFltFpMAdrBNwpKg/v8XdQxEbVSpCj2aN+D4jnVxPpf5Pk+jZRqGse/7TnVCCiGlkJemFVV1yrOcUUZTmiZpHCcJjCX9OfDIedwnUE12rFFrXbd1wfOsyBjLKKXwcRiGQRAQAkP8FeKT3zjjqgDRPM/DMECanGdhEvih52KMEPp4G2de8+yu29C2DStSK/Lx9gZ6G2d6zfXtIhgdZHcB4BrBJVpW0H+6lmV5WO4AGK0rp15gdzzsmlcgHSxotK6qKk4i7GKE0aHL2l3bmqY3QoiyLCmFEsVQAtd1D12/c73eoJ9KqaZpSl7mRc55eT6fOeeMMWiW7dTeqhc8z4PDbGnQfpgDImOM6pSoZcNbcRIX0WmlpZTQeNBBxiiKnnUlf7k6Zelkp2qlK9PXV90adVHggqQ2XWbbD78JGMHlgcT3Nhfeyvx0fQEAEY2fDTJCHAAAAABJRU5ErkJggg==" class="kg-image lazyload" alt="" loading="lazy" width="720" height="355" sizes="(min-width: 720px) 720px" data-src="/assets/images/Gefun-besu-network-term.png" data-srcset="https://blog.lorisocchipinti.com/content/images/size/w600/2022/10/besu-network-term.png 600w, https://blog.lorisocchipinti.com/content/images/2022/10/besu-network-term.png 720w"><figcaption>Image from consensys.net</figcaption></figure><p>There is a lot to unpack here. Aside from the <a href="https://www.elastic.co/what-is/elk-stack" rel="noopener ugc nofollow">ELK</a> stack, the monitoring tools and the block explorer, we can find:</p><ul><li>4 Ethereum nodes running on QFTP. This is the minimum number required to have a Byzantine-fault resistant network</li><li>3 Besu clients, holding their respective members’ info</li><li>3 Tessera services, which are required to manage private transactions and their data</li><li>An RPC service node</li></ul><h3 id="javafying-a-smart-contract">Javafying a Smart Contract</h3><p>The quorum-quickstart project features a smart contract called <code>SimpleStorage.sol</code> and some interesting scripts that showcase web3js, a library to interact with smart contracts on Ethereum networks. However, being more of a Kotlin person, I’d rather want to experiment with <em>web3j</em> (without the "s"), a Java-based library, and rewrite the same scripts to figure out what they actually do.</p><p>The first step is, obviously, to set up a project and then import the required dependencies:</p><pre><code class="language-js">// build.gradle (v6)
dependencies {
  implementation("org.web3j:core:4.8.7")
  implementation("org.web3j:besu:4.8.7")
}</code></pre><p>Let’s not forget about the plugin as well:</p><pre><code class="language-js">// build.gradle (v6)
plugins {
  id("org.web3j") version "4.8.7"
}</code></pre><p>The first step to take, after realizing that the <code>web3j</code> plugin <em>at the moment</em> does not support <em>gradle 7</em>, is to transform the <em>SimpleStorage</em> solidity file into a beautiful Java princess. Let’s take a look at it:</p><script src="https://gist.github.com/Ipanov7/52b00713ed068c4482afa625903aaa5f.js"></script><p>The contract logic is straightforward even for those among us who are not well-versed in the Solidity witchcraft. <code>SimpleStorage.sol</code> just stores a single unsigned integer on the blockchain, exposing some handy get/set methods for interacting with it. However, there is quite some work to do before we can afford to waltz in the company of this contract. Luckily, the web3j plugin can perform the work for us. All we need to do is to put it in a sensible location like the following</p><pre><code>src
├── main
│   ├── kotlin
│   ├── solidity
│   │   └── SimpleStorage.sol⭐
│   └── resources
└── test</code></pre><p>and then run <code>gradle generateContractWrappers</code>. The web3j plugin will build a Java wrapper called<code>SimpleStorage.java</code> in the project’s <code>build</code> directory so that we can easily handle the contract in our Kotlin code.</p><h3 id="set-up-member-credentials">Set up Member Credentials</h3><p>As we saw above, the Quorum Quickstart created three Besu memberships: for simplicity’s sake, we will call them ALICE, BOB and CHARLIE respectively. The private keys listed are generated by the Quorum quickstart example and stored in the <code>smart_contracts/keys.js</code> file</p><script src="https://gist.github.com/Ipanov7/981d4605165bd5256e08dfd661ee7eb2.js"></script><p>The main elements are:</p><ul><li><strong>members’ node URLs: </strong>these are the endpoints to reach the Besu clients and submit the requests</li><li><strong>private keys: </strong>members’ credentials to submit transactions, from which we can also derive their public key and address. It’s all hardcoded here for demonstrative purposes, it’s best to rely on a proper key management system for real uses cases</li><li><strong>Tessera public keys: </strong>references to the Tessera’s enclave IDs, needed for managing private transaction data</li></ul><p>Now that we looked at the file contents we can, well, translate them to a more JVM-palatable language, like Kotlin:</p><script src="https://gist.github.com/Ipanov7/b39316fe9b42dd8775f147a1a88e2084.js"></script><p>Everything is finally ready to perform some blockchain trickery.</p><h3 id="running-a-public-transaction">Running a Public Transaction</h3><p>A basic starting point would be to deploy our <code>SimpleStorage</code> smart contract and submit a transaction to it. But how can we? Honestly, the Javascript example looks a bit convoluted:</p><script src="https://gist.github.com/Ipanov7/100261f3ce2fdcfc7b0f1840f9b3c115.js"></script><p>A lot is going on there, and it’s normal to feel a little dizzy at first. In a few words, the example builds a <code>RawTransaction</code> from scratch by submitting the hex encoding of the smart contract, signs the transaction locally with <code>Alice</code>’s private key and submits the transaction. Finally, the contract address is not immediately available, we still have to wait for the transaction to be confirmed to later invoke the contract methods. In short, it’s a drag.</p><p>However, it doesn’t have to be this way.</p><pre><code>val simpleStorage = SimpleStorage.deploy(
  clientAlice, ALICE, GAS_PRICE, GAS_LIMIT, BigInteger.ONE
).send()</code></pre><p>… magic! We just deployed a smart contract on Ethereum with just a one-liner hocus pocus, all thanks to the web3j wrappers and niceties. We can invoke <code>get</code> and <code>set</code> methods in Kotlin idiomatically, as <code>simpleStorage</code> is a regular object. Alice's credentials are embedded in the smart contract instance, so we can submit any transaction and web3j will take care of encoding, signing, sending to Besu and all that jazz. It goes without saying, it’s only fair that Bob and Charlie should have the chance to access to same public contract</p><pre><code>val contractForBob = SimpleStorage.load(
  DEPLOYED_CONTRACT_ADDRESS, clientBob, BOB, GAS_PRICE, GAS_LIMIT
)</code></pre><p>It’s possible to write a very basic dApp just by accessing the aforementioned set of APIs. Alice and Bob could interact on the same instance of the smart contract by accessing their independent ledger instances, possibly from opposite sides of the world:</p><script src="https://gist.github.com/Ipanov7/a451708b124477c14039a4f24a8dc8cd.js"></script><hr><script src="https://gist.github.com/Ipanov7/3b175d509e905b0bfa5ad901809226eb.js"></script><h3 id="running-a-private-transaction-%F0%9F%A5%B7">Running a Private Transaction 🥷</h3><p>Now that we all feel a bit godmotherly, we can even think of dipping our feet in private transactions. Please beware: when mentioning private transactions, I mean transactions where the data payload is available to a closed group of participants. This feature in Besu is orthogonal to the target network: it is possible to run private transactions either in the Ethereum mainnet or in a permissioned network.</p><p>The enabling technology for the privacy layer is called Tessera: it is a decentralized storage for private transaction data, where each participant is identified by an Enclave key and has access to a reserved Tessera node. A collective of multiple enclaves is called a Privacy Group, an entity that holds a private state collected during private transactions. Of course, any node willing to work with private data must have its Tessera Node. The Quorum quickstart example will set up Enclaves out of the box: just remember to <a href="https://besu.hyperledger.org/en/stable/HowTo/Use-Privacy/Use-FlexiblePrivacy/#enabling-flexible-privacy-groups" rel="noopener ugc nofollow">enable privacy groups by configuring environment variables</a>.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAWCAYAAAA1vze2AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC00lEQVRIx5VV23ajMAzk//9x0yRcjW0MmEv6pM4YTF2S5nQfdISN0Vgzksgej4e8snVdg/F5XhfpFy/t3Es9ueC55v757CvL/gLgAsAgDYKn3v0R6HcQPq+PcGOFoLfByLXTcrWt3JyW+2hETVtGjz34f4NEr/ebF4OV2nVS205U76T0XaCO79e/gMRUU2MWC7zaqcl7I6U28q+spIIveot3Q3i/JCBPcQhy5vLzc7d9fWQyWmmQQRMy6aUcu7CfZvKbttkh8IwKGkbRCELjs58nMQhSTp1cR+iAbG7QhD5q4mZ/BFuW5bAUONDlJwTrnNStCdaAjqrV4B/PA24M7sl/7q0UMHoCdPN2EQadE4AzUMYFAUrVyiUv5aOo5FrUcoH/qGspjRY7beVKsXNvQmasqmmZwcBmEy4aLe5FoGz0E26v5VbWcquaIGptrNxrJReInCsl/TjK8tgqLVYU+4MBIsCIM8MwSA+9vPcHGIGyrh8CNTmCsnpyPBdaSwOgommlVlqMczLi1s3opAJ9yvcyLAiyzAc1BHE4Z60NIBGAPnNAr9QGUhlogUN11x0gfKf5MfgvejZkKyXKl2u/fOtBEAJoXJAZMZMDhKJT6DuousJyaFPASB33lLbi/ChmAohDde0gJoDMB0hKWUpVoIu8duDx0AX2EawKNDrQSYF7lKoGTQqUaT+ENYOvy6YLKSIILaUrCL/1yCzUJpQu6Lk3KgjeIP0BH/AwgUbQ08Pop0SPWE3p7SPAj2akn6Y5VFILTVRnQ59YB5GxxwDbuHluvBQkzeDok1eDjUA1ioAZUXz20TD67+Cn0qVFoc+xnjIJ1O3NyeCXHI0JfRpMAWqTZnAG8Tut62lY/hj1cYMHY++wwljaLWYZKTvT9C6Tp9l1/oewrAnUGgxLZMVhyZufx/mrWfUW5Aw0IShHjv+F63f/j/PZl5m8+zecA777q8a9L0eCQMzDHZYTAAAAAElFTkSuQmCC" class="kg-image lazyload" alt="" loading="lazy" width="731" height="636" sizes="(min-width: 720px) 720px" data-src="/assets/images/Ge0ia-tessera.png" data-srcset="https://blog.lorisocchipinti.com/content/images/size/w600/2022/10/tessera.png 600w, https://blog.lorisocchipinti.com/content/images/2022/10/tessera.png 731w"><figcaption><a href="https://besu.hyperledger.org/en/stable/Concepts/Privacy/Privacy-Overview/" rel="noopener ugc nofollow">https://besu.hyperledger.org/en/stable/Concepts/Privacy/Privacy-Overview/</a></figcaption></figure><p>Running private transactions is a bit more involved than submitting public ones, but web3j still makes a good job of spoiling us. The main caveat is that we now need a <code>private transaction processor</code> to check whether the private transactions are being mined or not, and a <code>private transaction manager</code> instead of plain credentials. But let’s go in order.</p><p>We will create a privacy group for Alice and Charlie and wait until it is confirmed onchain</p><script src="https://gist.github.com/Ipanov7/032d40213f38ee091cc3730b6bf57632.js"></script><p>Deploying smart contracts and interacting with them is almost as straightforward as it was with public transactions. All we need is the<em> Privacy Group ID</em> and a special <code>transaction manager</code> that is easily built from information already available</p><script src="https://gist.github.com/Ipanov7/dbd066f99c4cc6f9f2aba246b1e35782.js"></script><p>Finally, all we need to do is deploy a Smart Contract privately</p><pre><code>val privateSimpleStorage = SimpleStorage.deploy(
  clientAlice, tm, GAS_PRICE, GAS_LIMIT, BigInteger.ONE
).send()</code></pre><p>Our private smart contract wrapper will now expose the <code>set</code> and <code>get</code> methods of the Solidity implementation but, unsurprisingly, data will only be available within the privacy group.</p><h3 id="conclusions">Conclusions</h3><p>JVM-based languages are not first to mind when discussing web3 applications but, honestly, they are pretty ubiquitous and there is a nice ecosystem in place for them already. It’s only up to us to decide what to build.</p><p><em>If you had a good time and would like to read more articles with questionable Disney comparisons, follow me on Medium and let me know what is your opinion.</em></p><p>Well, let’s go now: our <em>Kotlinderellas</em> are waiting for us!</p><h3 id="references">References</h3><ul><li>Web3j website: <a href="https://docs.web3j.io/4.8.7/" rel="noopener ugc nofollow">https://docs.web3j.io/4.8.7/</a></li><li>Besu docs and API: <a href="https://besu.hyperledger.org/en/stable/" rel="noopener ugc nofollow">https://besu.hyperledger.org/en/stable/</a></li><li>Quorum quickstart: <a href="https://consensys.net/quorum/products/guides/getting-started-with-consensys-quorum/" rel="noopener ugc nofollow">https://consensys.net/quorum/products/guides/getting-started-with-consensys-quorum/</a></li></ul></section></section></article></div></main></div><div class="viewport-bottom"><footer class="site-foot"><div class="site-foot-nav container"><div class="site-foot-nav-left"><a aria-current="page" class="" href="/">Loris Occhipinti </a>© 2020 – Published with <a class="site-foot-nav-item" href="https://ghost.org" target="_blank" rel="noopener noreferrer">Ghost</a></div><div class="site-foot-nav-right"><a class="site-foot-nav-item" href="/fire-alert/">Fire Alert 🛰️🔥 </a><a class="site-foot-nav-item" href="/about/">About Me</a></div></div></footer></div><a href="https://www.iubenda.com/privacy-policy/22201176" class="iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe" title="Privacy Policy ">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src="https://cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script></div><script>
            (function (selector, src, preferNativeLazyLoad) {
  var images = document.querySelectorAll(selector);
  var numImages = images.length;

  if (numImages > 0) {
    if (preferNativeLazyLoad && 'loading' in HTMLImageElement.prototype) {
      for (var i = 0; i < numImages; i++) {
        var keys = ['src', 'srcset'];

        for (var j = 0; j < keys.length; j++) {
          if (images[i].hasAttribute('data-' + keys[j])) {
            var value = images[i].getAttribute('data-' + keys[j]);
            images[i].setAttribute(keys[j], value);
          }
        }
      }

      return;
    }

    var script = document.createElement('script');
    script.async = true;
    script.src = src;
    document.body.appendChild(script);
  }
})(
              'img',
              'https://cdn.jsdelivr.net/npm/lazysizes@5/lazysizes.min.js',
              false
            );
          </script></body></html>