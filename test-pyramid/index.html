<!DOCTYPE html><html lang="en" class="no-js"><head><title>The Beauty of Test Pyramids – Loris Occhipinti</title><meta name="description" content="Random access stories about software engineering."><meta name="robots" content="index,follow"><meta name="generator" content="Eleventy"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="twitter:site" content="@ghost"><meta name="twitter:creator" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://blog.lorisocchipinti.com/test-pyramid/"><meta name="twitter:title" content="The Beauty of Test Pyramids – Loris Occhipinti"><meta name="twitter:description" content="I hate bugs. Please, don't misunderstand me: I don't necessarily despise looking into errors and fixing them. In fact, sometimes investigating bugs can be exceptionally rewarding and makes me feel like a hard-boiled detective. No, what I hate is that they break my illusion of being some kind of magician, muttering powerful spells in the shape of lines of code and bending reality to my will. According to my ideal, microservices should harmonically run together, with no hiccups, no breaks, and no "><meta name="twitter:image" content="https://images.unsplash.com/photo-1600520611035-84157ad4084d?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDh8fHB5cmFtaWR8ZW58MHx8fHwxNjY5NjYwNzUy&amp;ixlib=rb-4.0.3&amp;q=80&amp;w=2000"><link rel="author" href=""><link rel="publisher" href="https://blog.lorisocchipinti.com"><meta itemprop="name" content="The Beauty of Test Pyramids – Loris Occhipinti"><meta itemprop="description" content="I hate bugs. Please, don't misunderstand me: I don't necessarily despise looking into errors and fixing them. In fact, sometimes investigating bugs can be exceptionally rewarding and makes me feel like a hard-boiled detective. No, what I hate is that they break my illusion of being some kind of magician, muttering powerful spells in the shape of lines of code and bending reality to my will. According to my ideal, microservices should harmonically run together, with no hiccups, no breaks, and no "><meta itemprop="image" content="https://images.unsplash.com/photo-1600520611035-84157ad4084d?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDh8fHB5cmFtaWR8ZW58MHx8fHwxNjY5NjYwNzUy&amp;ixlib=rb-4.0.3&amp;q=80&amp;w=2000"><meta property="og:url" content="https://blog.lorisocchipinti.com/test-pyramid/"><meta property="og:type" content="website"><meta property="og:title" content="The Beauty of Test Pyramids – Loris Occhipinti"><meta property="og:image" content="https://images.unsplash.com/photo-1600520611035-84157ad4084d?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDh8fHB5cmFtaWR8ZW58MHx8fHwxNjY5NjYwNzUy&amp;ixlib=rb-4.0.3&amp;q=80&amp;w=2000"><meta property="og:description" content="I hate bugs. Please, don't misunderstand me: I don't necessarily despise looking into errors and fixing them. In fact, sometimes investigating bugs can be exceptionally rewarding and makes me feel like a hard-boiled detective. No, what I hate is that they break my illusion of being some kind of magician, muttering powerful spells in the shape of lines of code and bending reality to my will. According to my ideal, microservices should harmonically run together, with no hiccups, no breaks, and no "><meta property="og:site_name" content="Loris Occhipinti"><meta property="og:locale" content="en"><meta property="article:author" content="https://blog.lorisocchipinti.com"><style>:root{--color-primary:#3eb0ef;--color-base:#15171a;--color-secondary:#5b7a81;--color-border:#c7d5d8;--color-bg:#f5f5f5;--font-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--font-serif:Georgia,Times,serif;--font-mono:Menlo,Courier,monospace;--font-light:100;--font-normal:400;--font-bold:700;--font-heavy:800;--height:4rem;--margin:2rem;--radius:0.6rem}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-spacing:0;border-collapse:collapse}img{max-width:100%;height:auto}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:0}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;background:var(--color-base);-webkit-tap-highlight-color:transparent}body{overflow-x:hidden;color:#3c484e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::selection{text-shadow:none;background:#cbeafb}hr{position:relative;display:block;width:100%;margin:1.8em 0 2.4em;padding:0;height:1px;border:0;border-top:1px solid #e3e9ed}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{margin:0;padding:0;border:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em 0}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{float:left;margin:0 20px 0 0;width:120px;font-weight:500;text-align:right}dd{margin:0 0 5px 0;text-align:left}blockquote{margin:.3em 0 1.8em;padding:0 1.6em 0 1.6em;border-left:#cbeafb .5em solid}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#26a8ed;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-top:0;color:var(--color-base);line-height:1.15;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em 0;font-size:4rem;font-weight:700}@media (max-width:500px){h1{font-size:2rem}}h2{margin:1.5em 0 .5em 0;font-size:2rem}@media (max-width:500px){h2{font-size:1.8rem}}h3{margin:1.5em 0 .5em 0;font-size:1.8rem;font-weight:500}@media (max-width:500px){h3{font-size:1.7rem}}h4{margin:1.5em 0 .5em 0;font-size:1.6rem;font-weight:500}h5{margin:1.5em 0 .5em 0;font-size:1.4rem;font-weight:500}h6{margin:1.5em 0 .5em 0;font-size:1.4rem;font-weight:500}.viewport{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}.container{max-width:1120px;margin:0 auto;padding:0 4vw}.content{margin:0 auto;font-size:2rem;line-height:1.7em}.content-body{display:flex;flex-direction:column;font-family:var(--font-serif)}.post-full-content{max-width:720px;margin:0 auto;background:#fff}.post-full-content figcaption{margin:1em 3em 0;font-size:55%;line-height:1.6em;text-align:center;font-weight:400}.post-feature-image img{margin:0 0 3vw;width:100%;height:500px;object-fit:cover}.content-body h1,.content-body h2,.content-body h3,.content-body h4,.content-body h5,.content-body h6{font-family:var(--font-sans-serif)}.content-body h1{margin:1em 0 .5em 0;font-size:3.4rem;font-weight:700}@media (max-width:500px){.content-body h1{font-size:2.8rem}}.content-title{margin:0 0 .8em;font-size:5rem}@media (max-width:500px){.content-title{margin:.8em 0;font-size:3.4rem}.content{font-size:1.8rem}}.content-body h2{margin:.8em 0 .4em 0;font-size:3.2rem;font-weight:700}@media (max-width:500px){.content-body h2{font-size:2.6rem}}.content-body h3{margin:.5em 0 .2em 0;font-size:2.8rem;font-weight:700}@media (max-width:500px){.content-body h3{font-size:2.2rem}}.content-body h4{margin:.5em 0 .2em 0;font-size:2.4rem;font-weight:700}@media (max-width:500px){.content-body h4{font-size:2.2rem}}.content-body h5{display:block;margin:.5em 0;padding:1em 0 1.5em;border:0;font-family:Georgia,serif;color:var(--color-primary);font-style:italic;font-size:3.2rem;line-height:1.35em;text-align:center}.content-body h6{margin:.5em 0 .2em 0;font-size:2rem;font-weight:700}.content-body figure{margin:.4em 0 1.6em;font-size:2.8rem;font-weight:700}.content-body pre{margin:.4em 0 1.8em;font-size:1.6rem;line-height:1.4em;white-space:pre-wrap;padding:20px;background:var(--color-base);color:#fff;border-radius:12px}.site-head{padding-top:20px;padding-bottom:20px;color:#fff;background:var(--color-base);background-position:center;background-size:cover}.site-nav-item{display:inline-block;padding:5px 10px;color:#fff;opacity:.7}.site-nav-item:hover{text-decoration:none;opacity:1}.site-nav-right .site-nav-button{margin-left:.3rem}.site-nav-icon{height:15px;margin:-5px 0 0;vertical-align:baseline}.site-logo{height:25px}.site-mast{display:flex;align-items:center;justify-content:space-between}.site-mast-right{display:flex;align-items:center}.site-mast-right .site-nav-item:last-child{padding-right:0}.site-banner{max-width:80%;margin:0 auto;padding:10vw 0;text-align:center}.site-banner-title{margin:0;padding:0;color:#fff;font-size:4rem;line-height:1.3em}.site-banner-desc{margin:5px 0 0 0;padding:0;font-size:2.4rem;line-height:1.3em;opacity:.7}.site-nav{display:flex;align-items:center;justify-content:space-between;margin:15px 0 0 0}.site-nav-left{margin:0 20px 0 -10px}.site-nav-button{display:inline-block;padding:5px 10px;border:#fff 1px solid;color:#fff;font-size:1.3rem;line-height:1em;border-radius:var(--radius);opacity:.7}.site-nav-button:hover{text-decoration:none}.site-main{padding:4vw 0}.post-feed{display:grid;justify-content:space-between;grid-gap:30px;grid-template-columns:1fr 1fr 1fr}@media (max-width:980px){.post-feed{grid-template-columns:1fr 1fr}}@media (max-width:680px){.post-feed{grid-template-columns:1fr}}.post-card{color:inherit;text-decoration:none}.post-card:hover{text-decoration:none}.post-card-header{display:flex;flex-direction:column}.post-card-tags{margin:0 0 5px 0;font-size:1.4rem;line-height:1.15em;color:var(--color-secondary)}.post-card-title{margin:0 0 10px 0;padding:0}.post-card-excerpt{font-size:1.6rem;line-height:1.55em}.post-card-image{margin:0 0 10px 0;width:auto;height:200px;background:var(--color-secondary) no-repeat center center;background-size:cover;object-fit:cover}.post-card-footer{display:flex;align-items:center;justify-content:space-between;margin:10px 0 0 0;color:var(--color-secondary)}.post-card-footer-left{display:flex;align-items:center}.post-card-footer-right{display:flex;flex-direction:column}.post-card-avatar{width:30px;height:30px;margin:0 7px 0 0;border-radius:100%;display:flex;align-items:center;justify-content:center}.post-card-avatar .author-profile-image{display:block;width:100%;background:var(--color-secondary);border-radius:100%;object-fit:cover}.post-card-avatar .default-avatar{width:26px}.tag-header{max-width:690px;margin:0 0 4vw}.tag-header h1{margin:0 0 1rem 0}.tag-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}@media (max-width:500px){.tag-header{border-bottom:var(--color-bg) 1px solid;padding-bottom:4vw}.tag-header p{font-size:1.7rem}}.author-header{display:flex;justify-content:space-between;margin:0 0 4vw}.author-header h1{margin:0 0 1rem 0}.author-header p{margin:0;color:var(--color-secondary);font-size:2.2rem;line-height:1.3em}.author-header-image{flex:0 0 auto;margin:0 0 0 4vw;height:120px;width:120px;border-radius:100%;overflow:hidden}.author-header-meta{display:flex;margin:1rem 0 0 0}.author-header-item{display:block;padding:2px 10px}.author-header-item:first-child{padding-left:0}@media (max-width:500px){.author-header{border-bottom:var(--color-bg) 1px solid;padding-bottom:4vw}.author-header p{font-size:1.7rem}.author-header-image{height:80px;width:80px}}.pagination{position:relative;display:flex;justify-content:space-between;align-items:center;margin:4vw 0 0}.pagination a{display:inline-block;padding:10px 15px;border:var(--color-border) 1px solid;color:var(--color-secondary);text-decoration:none;font-size:1.4rem;line-height:1em;border-radius:var(--radius)}.pagination-location{position:absolute;left:50%;width:100px;margin-left:-50px;text-align:center;color:var(--color-secondary);font-size:1.3rem}.pagination span{color:var(--color-secondary);opacity:.8}.site-foot{padding:20px 0 40px 0;color:rgba(255,255,255,.7);font-size:1.3rem;background:var(--color-base)}.site-foot-nav{display:flex;align-items:center;justify-content:space-between}.site-foot-nav a{color:rgba(255,255,255,.7)}.site-foot-nav a:hover{text-decoration:none;color:#fff}.site-foot-nav-right a{display:inline-block;padding:2px 5px}.site-foot-nav-right a:last-child{padding-right:0}.kg-bookmark-card{width:100%;margin-top:0}.kg-bookmark-container{display:flex;min-height:148px;color:var(--color-base);font-family:var(--font-sans-serif);text-decoration:none;border-radius:3px;box-shadow:0 2px 5px -1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.09)}.kg-bookmark-container:hover{color:var(--color-base);text-decoration:none;box-shadow:0 2px 5px -1px rgba(0,0,0,.15),0 0 1px rgba(0,0,0,.09)}.kg-bookmark-content{flex-grow:1;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:20px}.kg-bookmark-title{color:color(var(--color-secondary) l(-30%));font-size:1.6rem;line-height:1.5em;font-weight:600;transition:color .2s ease-in-out}.kg-bookmark-container:hover .kg-bookmark-title{color:var(--color-primary)}.kg-bookmark-description{display:-webkit-box;overflow-y:hidden;margin-top:12px;max-height:48px;color:color(var(--color-secondary) l(-10%));font-size:1.5rem;line-height:1.5em;font-weight:400;-webkit-line-clamp:2;-webkit-box-orient:vertical}.kg-bookmark-thumbnail{position:relative;min-width:33%;max-height:100%}.kg-bookmark-thumbnail img{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:0 3px 3px 0;object-fit:cover}.kg-bookmark-metadata{display:flex;flex-wrap:wrap;align-items:center;margin-top:14px;color:color(var(--color-secondary) l(-10%));font-size:1.5rem;font-weight:400}.kg-bookmark-icon{margin-right:8px;width:22px;height:22px}.kg-bookmark-author{line-height:1.5em}.kg-bookmark-author:after{content:"•";margin:0 6px}.kg-bookmark-publisher{overflow:hidden;max-width:240px;line-height:1.5em;text-overflow:ellipsis;white-space:nowrap}.kg-gallery-container{display:flex;flex-direction:column;max-width:1040px;width:100%}.kg-gallery-row{display:flex;flex-direction:row;justify-content:center}.kg-gallery-image img{display:block;margin:0;width:100%;height:100%}.kg-gallery-row:not(:first-of-type){margin:.75em 0 0 0}.kg-gallery-image:not(:first-of-type){margin:0 0 0 .75em}.kg-gallery-card+.kg-gallery-card,.kg-gallery-card+.kg-image-card.kg-width-wide,.kg-image-card.kg-width-wide+.kg-gallery-card,.kg-image-card.kg-width-wide+.kg-image-card.kg-width-wide{margin:-2.25em 0 3em}</style><script>document.documentElement.classList.remove('no-js');</script></head><body><svg xmlns="http://www.w3.org/2000/svg" style="height:0;position:absolute" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol id="facebook" viewBox="0 0 512 512"><path fill="#fff" d="M452 0H60C26.916 0 0 26.916 0 60v392c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V60c0-33.084-26.916-60-60-60zm20 452c0 11.028-8.972 20-20 20H338V309h61.79L410 247h-72v-43c0-16.975 13.025-30 30-30h41v-62h-41c-50.923 0-91.978 41.25-91.978 92.174V247H216v62h60.022v163H60c-11.028 0-20-8.972-20-20V60c0-11.028 8.972-20 20-20h392c11.028 0 20 8.972 20 20v392z"></path></symbol><symbol id="rss" viewBox="0 0 643 643"><path fill="#fff" d="M93.299 613.7c-50.798 0-92.117-41.348-92.117-92.117 0-50.827 41.319-92.174 92.117-92.174s92.117 41.376 92.117 92.174c.028 50.77-41.319 92.117-92.117 92.117zm0-155.507c-34.894 0-63.304 28.439-63.304 63.39 0 34.922 28.41 63.304 63.304 63.304 34.893 0 63.303-28.382 63.303-63.304.029-34.95-28.381-63.39-63.303-63.39z"></path><path fill="#fff" d="M400.537 614.306h-112.2c-7.952 0-14.407-6.454-14.407-14.407 0-69.585-26.883-134.905-75.664-183.945C149.514 366.998 84.654 340 15.704 340c-7.953 0-14.407-6.454-14.407-14.406V213.336c0-7.953 6.454-14.407 14.407-14.407 220.165 0 399.27 179.883 399.27 400.969-.03 7.982-6.455 14.408-14.437 14.408zm-98.139-28.814h83.473c-7.376-193.743-162.912-349.999-355.79-357.461v83.531c71.285 3.486 137.787 33.021 188.585 84.078 50.828 51.086 80.246 118.048 83.732 189.852z"></path><path fill="#fff" d="M598.775 614.363H486.604c-7.952 0-14.406-6.454-14.406-14.407 0-253.04-204.721-458.942-456.378-458.942-7.953 0-14.407-6.454-14.407-14.407v-112.2C1.412 6.455 7.866 0 15.819 0c329.397 0 597.363 269.147 597.363 599.956a14.375 14.375 0 0 1-14.407 14.407zm-97.966-28.813h83.387C576.675 282.085 332.307 36.593 30.226 28.987v83.444c256.124 7.549 463.12 215.64 470.583 473.119z"></path></symbol><symbol id="twitter" viewBox="0 0 612.002 612.002"><path fill="#fff" d="M197.553 557.219c-68.018 0-134.159-19.371-191.294-56.047-5.333-3.428-7.591-10.066-5.469-16.051 2.122-5.986 8.189-9.795 14.42-8.896 47.912 5.576 97.919-4.164 139.873-28.16-41.491-12.461-75.228-44.594-88.859-87.199a13.57 13.57 0 0 1 2.802-13.195 13.736 13.736 0 0 1 7.346-4.244c-32.404-24.678-52.864-63.639-52.864-106.436 0-4.816 2.558-10.012 6.72-12.461 4.163-2.449 9.305-3.21 13.495-.925a67.034 67.034 0 0 0 3.646 1.932c-14.719-21.739-22.881-47.749-22.881-74.902 0-23.562 6.23-46.796 18.093-67.147 2.231-3.863 6.23-6.366 10.692-6.72a13.734 13.734 0 0 1 11.59 4.952c55.04 67.501 134.703 110.298 220.624 119.086a135.305 135.305 0 0 1-.571-12.434c0-73.65 59.937-133.588 133.587-133.588 34.199 0 67.311 13.25 92.015 36.648 22.719-5.197 44.484-13.93 64.808-25.983a13.737 13.737 0 0 1 15.399 1.061c4.408 3.537 6.204 9.414 4.489 14.801a132.455 132.455 0 0 1-18.99 37.519 214.647 214.647 0 0 0 16.678-6.584c5.469-2.503 12.025-.979 15.916 3.7 3.891 4.625 4.245 11.291.898 16.324-15.808 23.562-35.07 44.103-57.299 61.162.082 2.938.109 5.904.109 8.842.001 174.453-132.798 354.945-354.973 354.945zm-128.69-53.543c40.458 17.33 84.125 26.336 128.69 26.336 205.17 0 327.766-166.645 327.766-327.765 0-4.979-.136-9.985-.326-14.964a13.59 13.59 0 0 1 5.632-11.59 228.226 228.226 0 0 0 27.507-23.371 255.254 255.254 0 0 1-26.99 4.707c-6.312.898-12.406-2.993-14.501-9.087-2.068-6.067.381-12.76 5.877-16.08a107.521 107.521 0 0 0 28.051-24.296c-13.577 5.197-27.562 9.25-41.845 12.025-4.571.953-9.333-.571-12.543-4.026-20.024-21.331-48.348-33.574-77.677-33.574-58.659 0-106.38 47.721-106.38 106.38 0 8.135.925 16.324 2.774 24.269a13.662 13.662 0 0 1-2.829 11.808c-2.721 3.265-6.829 5.523-11.101 4.843-92.858-4.68-180.33-45.953-243.179-114.189a106.518 106.518 0 0 0-6.094 35.533c0 35.696 17.685 68.753 47.286 88.533a13.578 13.578 0 0 1 5.414 15.454c-1.85 5.768-7.591 9.25-13.358 9.468a133.043 133.043 0 0 1-38.172-6.856c8.407 42.144 40.811 75.555 83.146 84.07 6.203 1.252 10.719 6.557 10.91 12.869.218 6.285-3.917 11.916-9.985 13.604-11.726 3.184-24.051 4.979-36.104 4.734 18.229 32.24 52.456 53.217 90.655 53.979 5.741.109 10.801 3.863 12.624 9.305s0 11.482-4.517 15.02c-38.226 29.953-83.01 47.964-130.731 52.861z"></path></symbol><symbol id="link" viewBox="0 0 16 16"><path d="M5.86 12.7l-.81.8c-.7.7-1.84.7-2.54 0a1.75 1.75 0 0 1 0-2.5l2.98-2.96c.61-.61 1.77-1.52 2.62-.68a1 1 0 1 0 1.4-1.4c-1.44-1.43-3.57-1.17-5.42.67L1.1 9.6a3.72 3.72 0 0 0 0 5.32 3.78 3.78 0 0 0 5.34 0l.8-.8a1 1 0 1 0-1.39-1.42zm9.03-11.5c-1.55-1.53-3.7-1.6-5.14-.19l-1 1a1 1 0 1 0 1.39 1.41l1-1c.75-.74 1.72-.43 2.35.2a1.75 1.75 0 0 1 0 2.5l-3.17 3.15c-1.46 1.45-2.14.77-2.43.48a1 1 0 0 0-1.4 1.4c.67.67 1.43 1 2.23 1 .98 0 2.01-.5 3-1.47l3.17-3.15a3.72 3.72 0 0 0 0-5.32z"></path></symbol><symbol id="nav" viewBox="0 0 16 11"><path d="M0 12h16v-2H0v2zm0-5h16V5H0v2zm0-7v2h16V0H0z"></path></symbol></svg><div class="viewport"><div class="viewport-top"><header class="site-head" style="background-image:url(https://static.ghost.org/v4.0.0/images/publication-cover.jpg)"><div class="container"><div class="site-mast"><div class="site-mast-right"><a href="https://twitter.com/ghost" class="site-nav-item" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--twitter" role="img" aria-labelledby="twitter-title"><title id="twitter-title">twitter</title><use xlink:href="#twitter" fill="currentColor"></use></svg> </a><a href="https://www.facebook.com/ghost" class="site-nav-item" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--facebook" role="img" aria-labelledby="facebook-title"><title id="facebook-title">facebook</title><use xlink:href="#facebook" fill="currentColor"></use></svg> </a><a class="site-nav-item" href="https://feedly.com/i/subscription/feed/https://blog.lorisocchipinti.com/feed.xml" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" class="site-nav-icon site-nav-icon--rss" role="img" aria-labelledby="rss-title"><title id="rss-title">rss</title><use xlink:href="#rss" fill="currentColor"></use></svg></a></div></div><nav class="site-nav"><div class="site-nav-left"><a class="site-nav-item" href="/">Home </a><a class="site-nav-item" href="/about/">About</a></div><div class="site-nav-right"><a class="site-nav-button" href="/about/">About Me</a></div></nav></div></header><main class="site-main"><div class="container"><article class="content"><figure class="post-feature-image"><img src="data:image/png;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAOABkDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAUGB//EACMQAAIDAAAEBwAAAAAAAAAAAAIDAAEEERQhMQUSE0FRUlP/xAAXAQADAQAAAAAAAAAAAAAAAAABAgQF/8QAHBEBAAICAwEAAAAAAAAAAAAAAQACBhEFFTJB/9oADAMBAAIRAxEAPwDoO3KigomOHyj3432i8OhCcy2ocBLvoNwebMh7LpoWQl1uruXsmXItdAvONDXtM++RKaKyo4mtXayF4k3mll6ui7H4GROSyfYpr9i0BV0ChqA4L/IYDIgPMbqt/Z//2Q==" alt="The Beauty of Test Pyramids" data-src="/assets/images/1UTJXg-photo-1600520611035-84157ad4084d.jpg" class="lazyload" width="2000" height="1125"></figure><section class="post-full-content"><h1 class="content-title">The Beauty of Test Pyramids</h1><section class="content-body load-external-scripts"><p>I hate bugs. Please, don't misunderstand me: I don't necessarily despise looking into errors and fixing them. In fact, sometimes investigating bugs can be exceptionally rewarding and makes me feel like a hard-boiled detective. No, what I hate is that they break my illusion of being some kind of magician, muttering powerful spells in the shape of lines of code and bending reality to my will. According to my ideal, microservices should harmonically run together, with no hiccups, no breaks, and no dead-letter queues.</p><p>This is, of course, a deeply flawed - and quite arrogant - vision. The reality is that software soon loses its heavenly halo in the mud of crappy workarounds, fuzzy requirements, and unmalleable architectures. Its authors are quite certainly imperfect, too. In my programming career, there always was a looming side quest looking for better practices and sophistication that would attenuate the aforementioned shortcomings: one of the most valuable tools I found is the Test Pyramid.</p><p>The Test Pyramid is an ancient concept (as ancient as a <a href="https://books.google.com.ar/books/about/Succeeding_with_Agile.html?id=IdT6AgAAQBAJ">book written in 2009</a> can be) but still holds valuable treasures. The Pyramid illustrates what the different types of tests are and which is their relative weight in a codebase. Every half-decent developer what the three types of tests featured are:</p><ul><li><em><strong>Unit Tests:</strong></em> their purpose is to focus on a single <em>unit</em> of the codebase, often a single function. They are narrow, straight to the point, and by large the most abundant in a project.</li><li><em><strong>Integration Tests:</strong></em> how will the application behave when interacting with other systems? These tests target the interfaces between different services, such as a database or an external endpoint.</li><li><em><strong>End-to-End Tests: </strong></em>finally, it is wise to test an application from the point of view of its user (which is typically a UI, like those offered by mobile and web apps). These automated tests are very slow and traverse the whole tech stack, but will validate the application in a way that is otherwise impossible in a more convenient way than manual QA.</li></ul><p>However, I like working with a slightly different mental model: the Correctness Pyramid. This enhanced version - originally <a href="https://www.youtube.com/watch?v=SIr7mcnVy98&amp;t=799s">presented </a>by Christina Lee during the KotlinConf 2019 - encompasses broader activities and different stakeholders, including end-users. For example, it also takes into account the detail specification phase, PRs, manual QA testing, and - at the very top - even the normal application activity in the Production environment.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAATCAYAAABlcqYFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNUlEQVQ4y61UTU9TURCduW3f47W81gIqiCiCNkSDgC40GhUES5WgAlIBUcNnjLRiaQSqhIXRxIhavhK/ois/NrrSBegG+GPHebeIRiWCsjg5vXPPvNM7M/cSEWHNyFIgS2V4PXlrFloucMgLVWWD93hBptpgExeDd/vgaS+EkSyFu7UAXGyB1AaasG3COFqI7FsHEJg9Bl+iEp5D+SCvsUEmLhdUYR68ZyqReyuC/IdNyEmEYYXLwfk5chr1nybMoIAfqrwMvnNh5PZGUTDQiWBPK6zGWvDeEMhvZ3T/bJKdDSoLgSN1MK90wO7vQc61fmT3dcO43A4KnwSFdoN83n80MaXee0rAjRFQrBdqeBBmagjWnSSMVAI8fAM00ANqCINKikGGZ50mbhnX0mJw9Cz4Xgr0dALq+WN4XqRhvEwLPwHL2onT3RFQSwOouEj6p9ZuwlvyoBpOQT0Yg/r4GvzpDVwC8/M7WAKHlaydOH94Bb6fAtfXgHKDazRhOcWOXeDzLVDj4+DpSfBUGq6pSZgz07BmZjSrqUxc74+NSVnPgwp3Sr76m4lMiRWQG30AXBcFX4qBrt4EXRmEEja7pSfdSZhdQ3rtxNnhDtGdvAAqrZAnx5/5zqomhkzJZpmWkBy9sgVUFRW0aqiDF2EevgTrSCeMQx1gWX/f07qKZhmUalBeCcjjXcXEbYpBKWjfadDRPlB1HHQirlnVxOGpG4S3fgi+SFIuYgLuWjlFdXxZF8toj/SC9tZnjNzGLyZOHXN2gPY3gupHQU0PQc0TGtwyIW/VY1jtadidU/Bfntac1ZaW+COZrIkVrc4LD8sfPQPatP3nSyo/gkVy/DZQ2zNQ/CsosQi6uaDBiQV4kovwjizBn1pCILUIe3QJ1vAS3BKnxMKKVufFvoCis1Ju6VFg27KJcoO3V4FrpIFd7+WCzQvmMrg+BxZ2xeaRNTgvD+M87KE5zaasnfiKdlmv86++BR2XEm4r19OqTahgX6aBdXKxwrdBp1K/wSVlNCKjyDo9Ao+wCo/+Uafza6VkFTI4W8vkAXVMnH44Y+fP12WjTcsI/hkcXH3vR670194qT5Ot+/0NgvaR03k+eO4AAAAASUVORK5CYII=" class="kg-image lazyload" alt="" loading="lazy" width="913" height="678" sizes="(min-width: 720px) 720px" data-src="/assets/images/Z2kahzj-image.png" data-srcset="https://blog.lorisocchipinti.com/content/images/size/w600/2022/11/image.png 600w, https://blog.lorisocchipinti.com/content/images/2022/11/image.png 913w"><figcaption>The Correctness Pyramid by Christina Lee</figcaption></figure><p>The message is crystal-clear: the higher you go, the more painful it is to be wrong about something. It could be a misunderstood requirement, an unexplored corner case, or an algorithm that scales poorly: anything that compromises the best functioning of the software and jeopardizes its effectiveness. To see why this is true, let's make a silly example and consider the worst case possible.</p><blockquote>Conezilla is a home delivery app that serves delicious ice-creams to its customer base. To ensure that the product delivered is always of the highest quality and doesn't melt, any order that takes more than 1 hour automatically expires and the ice-cream cannot be sold anymore. Developers take this predicament to heart and, without thinking too much about the consequences, implement a filter that hides all the expired orders from the UI. However, disgruntled users soon start complaining that they found credit card charges even if they don't remember ordering anything.</blockquote><p>The cost of not being correct is maximum here: not only we had some kind of disruption in the production environment, but now we need to go back to the whiteboard to untangle the mess, redesign a better process, develop the fix, push it through all the different type of test phases necessary and, finally, release it. We would also make sure that the impacted users are aware of the update and willing to use the App again. You really don't want to be wrong when transitioning to the upper part of the pyramid.</p><p>As a consequence, the attentive (and self-interested) developer will devote a reasonable deal of time and focus when designing a new feature. Linters and compilers will also automatically highlight a huge number of trivial errors that nobody wants to carry upwards and figure out only later when performing unit and integration tests. <em>Ça va sans dire</em>, the software will be written in a way that facilitates testability, flexibility, and decoupling. Good choices made at the foundation of the Pyramid will reap compounding benefits as we travel to the top. «Give me a lever» said Archimedes «and I will move the world». The Correctness Pyramid may give us developers a different type of leverage, but it is still a very powerful one.</p><p>What is the actionable insight here? The main takeaway is that the Pyramid nudges us into <em>down-shifting </em>issues: the earlier I find out I am wrong, the easier and less painful will be to solve the problem. It's obviously cheaper to verify an assumption when still on the whiteboard than when opening a PR, and it's way better to write one more test than to improvise as a firefighter in Production. I believe that the majority of best practices in software engineering help us to down-shift problems, and healthy team dynamics will help to stay on track.</p><p>In other words, it's best to squish bugs even before they are born. Why? Less work, fewer emergencies, satisfied customers, and happier business owners. Additionally, I can continue to be lulled in my reassuring illusions about perfect and harmonic software.</p><h3 id="references">References</h3><ul><li><a href="https://www.youtube.com/watch?v=SIr7mcnVy98&amp;t=799s">Christina Lee's speech at KotlinConf 2019</a></li><li><a href="https://books.google.com.ar/books/about/Succeeding_with_Agile.html?id=IdT6AgAAQBAJ">Succeeding with Agile, by Mike Cohn</a></li></ul></section></section></article></div></main></div><div class="viewport-bottom"><footer class="site-foot"><div class="site-foot-nav container"><div class="site-foot-nav-left"><a aria-current="page" class="" href="/">Loris Occhipinti </a>© 2020 – Published with <a class="site-foot-nav-item" href="https://ghost.org" target="_blank" rel="noopener noreferrer">Ghost</a></div><div class="site-foot-nav-right"><a class="site-foot-nav-item" href="/about/">About Me</a></div></div></footer></div></div><script>
            (function (selector, src, preferNativeLazyLoad) {
  var images = document.querySelectorAll(selector);
  var numImages = images.length;

  if (numImages > 0) {
    if (preferNativeLazyLoad && 'loading' in HTMLImageElement.prototype) {
      for (var i = 0; i < numImages; i++) {
        var keys = ['src', 'srcset'];

        for (var j = 0; j < keys.length; j++) {
          if (images[i].hasAttribute('data-' + keys[j])) {
            var value = images[i].getAttribute('data-' + keys[j]);
            images[i].setAttribute(keys[j], value);
          }
        }
      }

      return;
    }

    var script = document.createElement('script');
    script.async = true;
    script.src = src;
    document.body.appendChild(script);
  }
})(
              'img',
              'https://cdn.jsdelivr.net/npm/lazysizes@5/lazysizes.min.js',
              false
            );
          </script></body></html>